---
layout: post
title: Disable Sysdiagnose Key Combination
tags:
- osx
- os x
- mac
---
<p>I’ve learned many tips to improve my experience with OS X for the past three months. The most useful one, which I picked from Brett, is <a href="http://brettterpstra.com/2012/12/08/a-useful-caps-lock-key/">turning <code>Caps Lock</code> into “Hyper” modifier key</a>. In his post, Brett also outlines how he remaps hitting <code>Caps Lock</code> into <code>Escape</code> key when it’s not used as modifier. Despite trying to follow him using <code>Caps Lock</code> as <code>Escape</code> key, I gave up. There are way too many escape mistakes.<sup id="fnref:p52388484975-1"><a href="#fn:p52388484975-1" rel="footnote">1</a></sup></p>

<p>I use <a href="http://brettterpstra.com/projects/nvalt/">nVALT</a> to take notes. A global shortcut is required to toggle nVALT window quickly. <strong><code>Option + E</code></strong> used to be the key. You can easily find that shortcut being used across applications. As the result, there are some shortcuts being rendered useless. Hyper modifier key solves this problem.</p>

<p>The new modifier key prevents the common conflicts between app specific shortcuts with global shortcuts. There are many apps that sit in menu bar these days which allows you to assign shortcut to toggle them. These are the list of apps I’ve assigned with my own custom shortcuts.</p>

<ul><li><strong><code>Hyper + B</code></strong> to toggle Bartender Bar</li>
<li><strong><code>Hyper + C</code></strong> to toggle Cobook</li>
<li><strong><code>Hyper + D</code></strong> to toggle Delibar</li>
<li><strong><code>Hyper + E</code></strong> to toggle nVALT</li>
<li><strong><code>Hyper + F</code></strong> to toggle Fantastical</li>
<li><strong><code>Hyper + Space</code></strong> to toggle Keyboard Maestro Macro Trigger</li>
</ul><p>However, there is one small problem: you might trigger the sysdiagnose command accidentally. Finder will open the sysdiagnose folder, well, diagnose your system, and zip the log results. Worst, sysdiagnose will drive the CPU performance crazy in order to diagnose your system.</p>

<p>Apparently, the shortcut can be easily triggered.<sup id="fnref:p52388484975-2"><a href="#fn:p52388484975-2" rel="footnote">2</a></sup> You can see the description of sysdiagnose by typing the command below into Terminal.</p>

<pre><code>man sysdiagnose
</code></pre>

<p>Well, to save your time.</p>

<blockquote>
  <p>sysdiagnose can be triggered upon pressing a special key chord; this is currently <strong><code>Control-Option-Command-Shift-Period</code></strong>.</p>
</blockquote>

<p>The only way I have figured so far to prevent OS X from triggering this special key chord is by remapping the Period key. I’m borrowing <a href="http://stevelosh.com/blog/2012/10/a-modern-space-cadet/#better-shifting">Steve Losh’s tutorial</a><sup id="fnref:p52388484975-3"><a href="#fn:p52388484975-3" rel="footnote">3</a></sup> as a guide in creating two mapping rules for <a href="https://pqrs.org/macosx/keyremap4macbook/">KeyRemap4MacBook</a>. I assume you’ve installed KeyRemap4MacBook since we’ll need it to map the <code>Period</code> key.</p>

<p><img src="http://images.sayzlim.net/2013/06/keyremap4macbook_private.jpg" alt=" [Open “private.xml” file][] " title="Open “private.xml” file"/></p>

<p>Run KeyRemap4MacBook and navigate to Misc &amp; Uninstall tab. Choose “Open private.xml” under the Custom Setting. It’ll show you the private.xml. Open the file. Copy the code below and put it under the <em>root</em> tag.</p>

<pre><code>&lt;item&gt;
    &lt;name&gt;Disable Sysdiagnose DOT Key&lt;/name&gt;
    &lt;appendix&gt;Disable Sysdiagnose Key&lt;/appendix&gt;
    &lt;identifier&gt;private.disable_sysdiagnosedot&lt;/identifier&gt;
    &lt;autogen&gt;
        --KeyToKey--
        KeyCode::DOT,
        ModifierFlag::OPTION_L | ModifierFlag::SHIFT_L | ModifierFlag::CONTROL_L | ModifierFlag::COMMAND_L,
        KeyCode::VK_NONE
    &lt;/autogen&gt;
&lt;/item&gt;

&lt;item&gt;
    &lt;name&gt;Disable Sysdiagnose COMMA Key&lt;/name&gt;
    &lt;appendix&gt;Disable Sysdiagnose Key&lt;/appendix&gt;
    &lt;identifier&gt;private.disable_sysdiagnosecomma&lt;/identifier&gt;
    &lt;autogen&gt;
        --KeyToKey--
        KeyCode::COMMA,
        ModifierFlag::OPTION_L | ModifierFlag::SHIFT_L | ModifierFlag::CONTROL_L | ModifierFlag::COMMAND_L,
        KeyCode::VK_NONE
    &lt;/autogen&gt;
&lt;/item&gt; 
</code></pre>

<p>Run KeyRemap4MacBook again. This time, open Change Key tab and choose ReloadXML. You should see two new remapping rules similar to the screenshot below. Activate them.</p>

<p><img src="http://images.sayzlim.net/2013/06/keyremap4macbook_activate.jpg" alt=" [Activate new mapping rules][] " title="Activate new mapping rules"/></p>

<p>The rules above prevent the combination between left side modifier with Period and Comma. Try to hit <code>Hyper + Comma</code> and <code>Hyper + Period</code>. It should do nothing, but you can still type <code>Shift + Comma</code> and <code>Shift + Period</code>.</p>

<p>The new remapping rules should solve the problem with sysdiagnose randomly popping out from nowhere. <a href="/contact">Let me know</a> if it works for you.</p>

<div class="footnotes">
<hr><ol><li id="fn:p52388484975-1">
<p>There are many times the app exit full screen when I’m just getting into the flow. <a href="#fnref:p52388484975-1" rev="footnote">↩</a></p>
</li>

<li id="fn:p52388484975-2">
<p>Before solving this problem, I can end up with at least one sysdiagnose file every day. <a href="#fnref:p52388484975-2" rev="footnote">↩</a></p>
</li>

<li id="fn:p52388484975-3">
<p>I’ve managed to train my muscle memory to use Left Shift and Right Shift. It lifts the strains put on your fingers. <a href="#fnref:p52388484975-3" rev="footnote">↩</a></p>
</li>

</ol></div>
