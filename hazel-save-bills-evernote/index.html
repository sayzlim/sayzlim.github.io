<!DOCTYPE html><html lang='en'><head prefix="og: http://ogp.me/ns/article#"><meta charset='utf-8'><title>How to Use Hazel to Save Bills to Evernote Automatically | Sayz Lim</title><meta name="description" content="Why are you still saving invoices and receipts to Evernote manually if you can archive them automatically with Hazel?"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="/main.css?v=1626029820" as="style"><link rel="stylesheet" href="/main.css?v=1626029820" ><link href="https://fonts.googleapis.com/css2?family=Viga&display=swap" rel="stylesheet"><link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96"><link rel="apple-touch-icon" sizes="56x56" href="/img/apple-touch-icon-56x56.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><meta name="twitter:dnt" content="on"><meta name="format-detection" content="telephone=no"><link rel="alternate" type="application/rss+xml" title="Sayz Lim" href="https://sayzlim.net/atom.xml" /><meta property="og:title" content="How to Use Hazel to Save Bills to Evernote Automatically" /><meta property="og:type" content="article" /><meta property="og:url" content="https://sayzlim.net/hazel-save-bills-evernote/" /><meta property="og:description" content="Why are you still saving invoices and receipts to Evernote manually if you can archive them automatically with Hazel?" /><meta property="article:published_time" content="2016-06-03" /><meta property="article:author" content="Sayz Lim" /><meta property="og:image" content="https://images.sayzlim.net/2016/06/ifttt-dropbox.jpg" /><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@sayzlim"><meta name="twitter:title" content="How to Use Hazel to Save Bills to Evernote Automatically"><meta name="twitter:description" content="Why are you still saving invoices and receipts to Evernote manually if you can archive them automatically with Hazel?"><meta name="twitter:image:src" content="https://images.sayzlim.net/2016/06/ifttt-dropbox.jpg"><link rel="pingback" href="https://webmention.io/sayzlim.net/xmlrpc"><link rel="webmention" href="https://webmention.io/sayzlim.net/webmention"><body><div class="container"><header class="header"><nav class="nav-item"><ul><li><a href="/">Home</a><li><a href="/posts/">Posts</a><li><a href="/tags/">Tags</a><li><a href="/tools/">Tools</a></ul></nav></header><main class="prose flow"><section class="post" itemscope itemtype="https://schema.org/BlogPosting"><header class="flow"><h1 itemprop="headline"> <a itemprop="url" href="/hazel-save-bills-evernote/">How to Use Hazel to Save Bills to Evernote Automatically</a></h1><div class="post-author"><div class="post-avatar"><img src="/img/sayzlim.jpg" alt="Sayz Lim"><span class="schema-author" itemprop="author" itemprop="publisher">Sayz Lim</span></div><div> <span>Published</span> <time itemprop="datePublished" datetime="2016-06-03">Jun 03, 2016</time></div><div> <span>Tagged</span><ul class="post-tags"><li><a href="/tag/dropbox">Dropbox</a><li><a href="/tag/evernote">Evernote</a><li><a href="/tag/hazel">Hazel</a><li><a href="/tag/ifttt">IFTTT</a></ul></div></div></header><article itemprop="articleBody" class="flow"><p>We will be sitting in a self-driving car in 2020, but why are we still managing invoices and receipts manually? I went paperless from day one by having invoices, receipts, and billing summary sent my email address. The problem is I detest organizing them manually in Evernote, so I come up with this setup to automate the whole process.</p><p>I have two notebooks named as <code class="language-plaintext highlighter-rouge">Receipts</code> and <code class="language-plaintext highlighter-rouge">Bills</code>. Whenever I receive a receipt or billing summary, I will rename the files and move them to respective notebook. I can handle it in the beginning, but as I increase the number of subscriptions, I find that spending few hours a month to organize these documents is not worth my time.</p><p>One day, I decide to write down the steps I follow to properly put these documents in place: I receive an email, the email contains attachment, I download the document, I rename it, and I move it to Evernote.</p><p>None of these steps require me to monitor the process. With a few simple tools like IFTTT, Dropbox, and Hazel, I can already automate the task.</p><p>If you’re familiar with these tools, I will share a brief summary of what we will be doing.</p><p>The main idea is to use automation service like IFTTT or Zapier to detect attachment sent to our email address, which later are saved into Dropbox. We will then configure few Hazel rules in a folder storing those files, rename each file, and run an AppleScript that move the documents — also with proper tags — into Evernote selected notebook.</p><p>Here are the list of tools and accounts you need to make the setup works:</p><ol><li><a href="https://ifttt.com/" title="IFTTT - Connect The Apps You Love">IFTTT</a> or <a href="https://zapier.com/" title="The best apps. Better together. - Zapier">Zapier</a> account. If you’re new to automation, you can start by creating an IFTTT account for free. It also have ton of recipes you can run. You’ll be using IFTTT to be the bridge among the services we will be using in this guide.<li><a href="http://mail.google.com/mail?hl=en" title="Google Mail">Gmail</a>. We’ll be using Gmail because it’s free.<li><a href="https://itunes.apple.com/us/app/evernote/id406056744?mt=12&amp;at=11ld6n&amp;ct=evernote" title="Evernote on the Mac App Store - iTunes">Evernote for Mac</a> so you can run Evernote AppleScript.<li><a href="https://www.dropbox.com/referrals/NTM1NjQ5ODQ5" title="Create Account - Dropbox">Dropbox account</a> and <a href="https://www.dropbox.com/downloading?os=mac" title="Download Dropbox for Mac OS">Dropbox for Mac</a>.<li><a href="https://www.noodlesoft.com/" title="Noodlesoft – Noodlesoft – Simply Useful Software">Hazel</a> to create rules that detect files and run Evernote AppleScript.</ol><h2 id="setup-ifttt-recipe">Setup IFTTT Recipe</h2><p>Sign into your IFTTT account and activate Gmail and Dropbox in <a href="https://ifttt.com/channels" title="Discover new Channels - IFTTT">IFTTT Channels</a>. Now you can use any recipes that require those two channels.</p><p>The automation begins with IFTTT run a recipe that saves any new email with attachments to a Dropbox folder. You can directly activate <a href="https://ifttt.com/recipes/98759-save-all-your-gmail-attachments-to-dropbox" title="Save all your Gmail Attachments to Dropbox by Linden - IFTTT">Save all your Gmail Attachments to Dropbox recipe</a> to complete the setup.</p><p><img src="https://images.sayzlim.net/2016/06/ifttt-dropbox.jpg" alt="IFTTT Dropbox Channel Integration" title="IFTTT Dropbox Channel Integration" /></p><p>Set the folder path to <code class="language-plaintext highlighter-rouge">Apps/IFTTT/</code> so you can place IFTTT along with the rest of third party integrations that you have granted the access to your Dropbox account.</p><p>Now you have the core step implemented. Now every time you receive an email with attachments, these files will show up in the Dropbox folder. We’re not done with Gmail yet because we have to clean up those emails.</p><h2 id="cleaning-up-matching-emails-in-gmail">Cleaning Up Matching Emails in Gmail</h2><p>If you want to automate, you should automate every step. Wouldn’t it be ideal if Gmail can automatically archive those emails with receipt and billing so they don’t fill up your inbox?</p><p>Since you know for sure who will send you those billings and invoices, you can set up Gmail filters to archive those emails whenever they arrive at your inbox. Gmail filter is a powerful feature that you can bring in your arsenal in managing emails.</p><p>Visit <a href="https://mail.google.com/mail/u/0/#settings/filters" title="Gmail Filter Settings">Gmail Filters Settings</a> and create a filter with the following rules:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: &lt;sender@email-address.com&gt;
Has the words: &lt;the subject of the email, or the common words in the email content)
Has attachments: &lt;check&gt;
</code></pre></div></div><p><img src="https://images.sayzlim.net/2016/06/ifttt-gmail-filter.jpg" alt="Gmail Filter" title="Gmail Filter" /></p><p>It can be as simple as filling <code class="language-plaintext highlighter-rouge">From</code> field and leave the rest of value blanks, or as complete every form fields. <strong>The main point is to create a rule that can accurately detect the emails that contain receipts and billings</strong>.</p><p><img src="https://images.sayzlim.net/2016/06/ifttt-gmail-action.jpg" alt="Gmail Filter Action" title="Gmail Filter Action" /></p><p>Choose <code class="language-plaintext highlighter-rouge">Continue</code> and enable <strong>Mark the email as read</strong> and <strong>Skip the Inbox (Archive it</strong>).</p><p>Setting up Gmail filter doesn’t stop IFTTT from detecting new email with attachments.</p><p class="sidenote"><strong>What can you do if you receive the attachments from different email address?</strong> IFTTT doesn’t allow you to connect to more than one Gmail channels. You can setup an IFTTT connected Gmail channel as a forwarding email address in other accounts, and once verified, you can create filters to forward emails with attachment to your Gmail IFTTT account.</p><h2 id="hazel-rules-for-ifttt-folder">Hazel Rules for IFTTT Folder</h2><p>Create a new folder inside <code class="language-plaintext highlighter-rouge">~/Dropbox/Apps</code> and name it Evernote. The Dropbox folder structure should look something like this:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dropbox/
  Apps/
    IFTTT/
    Evernote/
</code></pre></div></div><p>Having a dedicated folder for each app that runs Hazel rules allows us to organize and manage the rules later. The point of separating rules per folder basis is to address a question like, “Where did I run this rules that trigger Evernote AppleScript?”</p><p>So why didn’t we just configure the IFTTT recipe to save every incoming attachment to <code class="language-plaintext highlighter-rouge">Apps/Evernote/</code>?</p><p>Remember that not all attachments saved inside <code class="language-plaintext highlighter-rouge">Apps/IFTTT</code> will be sent to Evernote. Sometimes you want to move the attachments to <code class="language-plaintext highlighter-rouge">Downloads</code> or <code class="language-plaintext highlighter-rouge">Desktop</code>. IFTTT folder is the main repository that decides where the attachments or files must be dispatched.</p><p>Now that the folders are available. Drag IFTTT folder into Hazel and create a new rule called “Move to Evernote”. The rule does only one thing: move <em>any matching</em> files to <code class="language-plaintext highlighter-rouge">Apps/Evernote/</code> folder.</p><p><img src="https://images.sayzlim.net/2016/06/ifttt-move-evernote.jpg" alt="Hazel Rules Move to Evernote" title="Hazel Rules Move to Evernote" /></p><p>The screenshot above shows how I use the standard filename and insurance number to decide when to move these attachments to Evernote folder. Unless the attachments meet the rules conditions I set, they will stay inside IFTTT folder for other rules to process.</p><p>Moving forward with IFTTT folder, you can come up with another rule such as “Move to Download”, “Move to OmniFocus”, or “Move to Things” where each folder can run their own AppleScript.</p><h2 id="hazel-rules-for-evernote-folder">Hazel Rules for Evernote Folder</h2><p>If you have come this far, try to send an email with attachment to your IFTTT Gmail account, and see if the attachment is saved to Evernote folder. Remember to force trigger the recipe if you don’t see it appear immediately.</p><p>Make sure you can find the attachments in Evernote folder. If the attachments are still inside IFTTT folder, you need to preview the rules you configured for IFTTT folder.</p><p>Great! Now there are only a few steps left to complete our setup. You will have to do a several things here:</p><ol><li>Decide the final filename format.<li>Create a rule to detect the attachments.<li>Create an action to rename those attachments into the final filename format.<li>Create an AppleScript action import these attachments into Evernote.<li>Move these attachments to Trash.</ol><p>There are no rigid rules when it comes to naming these attachments. In my case, I prepend the service name with imported date. Here are some examples of how I name them:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;created date&gt; &lt;service&gt; &lt;attachment name&gt;
Example:
2014-11-20 Telkom group_E09876543210
2016-05-31 PAM 2016 October Bill
2016-05-30 Allianz Premium Notice_012345678810
</code></pre></div></div><p><strong>For every service, you will need one rule</strong>. Each rule can have multiple matching patterns to detect attachments. If you want to create a complex matching pattern, try <a href="http://sayzlim.net/nested-rules-osx/" title="Why You Should Start Using OS X Nested Rules - Sayz Lim">nesting rules</a>.</p><p>Name the Hazel rule so that you can understand what it does without having to check the rules. Here are some of the rules I run for Evernote folder.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Save to &lt;notebook&gt; as &lt;service name&gt;
Example:
Save to Billings as Telkomsel Halo
Save to Billings as Telkomsel
Save to Billings as Allianz
</code></pre></div></div><p>Each service usually has their own file naming convention, and they rarely overlap. Most of the time, your unique number can be found as part of the attachments name.</p><p>Here is an example of Hazel rule that checks for Telkomsel Halo attachments and saves it to Evernote.</p><p><img src="https://images.sayzlim.net/2016/06/ifttt-evernote-rules.jpg" alt="Hazel Rules Check Filename" title="Hazel Rules Check Filename" /></p><p>The rule is pretty straightforward. It checks for matching attachments, rename them, and run an AppleScript that imports them to Evernote.</p><p>Here is what I have for <strong>Rename</strong> field value:</p><p><img src="https://images.sayzlim.net/2016/06/ifttt-evernote-filename.jpg" alt="Hazel Rules Naming Filename" title="Hazel Rules Naming Filename" /></p><p>You can edit the date pattern by clicking on the down arrow button beside <code class="language-plaintext highlighter-rouge">date added</code>. The ideal format is still <code class="language-plaintext highlighter-rouge">YYYY-MM-dd</code> when it comes to specifying the date prefix.</p><p>The final step is to fill in the AppleScript section. Click <code class="language-plaintext highlighter-rouge">Edit Script</code> and paste the following script into the text field. Rename “Billings” to your notebook name.</p><div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">tell</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="s2">"Evernote"</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="ow">not</span><span class="w"> </span><span class="p">(</span><span class="nv">notebook</span><span class="w"> </span><span class="nv">named</span><span class="w"> </span><span class="s2">"Billings"</span><span class="w"> </span><span class="nb">exists</span><span class="p">))</span><span class="w"> </span><span class="k">then</span><span class="w">
        </span><span class="nb">make</span><span class="w"> </span><span class="nv">notebook</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="na">properties</span><span class="w"> </span><span class="p">{</span><span class="na">name</span><span class="p">:</span><span class="s2">"Billings"</span><span class="p">}</span><span class="w">
    </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="w">
    </span><span class="nb">activate</span><span class="w">
    </span><span class="nv">create</span><span class="w"> </span><span class="nv">note</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">theFile</span><span class="w"> </span><span class="nv">notebook</span><span class="w"> </span><span class="s2">"Billings"</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">tell</span><span class="w">
</span></code></pre></div></div><p>The rules are fairly self-explanatory. If the notebook Billings doesn’t exist, it will create one on your behalf, and followed up by adding a new note from matching attachments. It will also delete the attachments once they are imported.</p><p>If you make sure the notebook exists, the script can be as simple as:</p><div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">tell</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="s2">"Evernote"</span><span class="w">
    </span><span class="nb">activate</span><span class="w">
    </span><span class="nv">create</span><span class="w"> </span><span class="nv">note</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">theFile</span><span class="w"> </span><span class="nv">notebook</span><span class="w"> </span><span class="s2">"Billings"</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">tell</span><span class="w">
</span></code></pre></div></div><p>If you want to tag the note with AppleScript, you can add <code class="language-plaintext highlighter-rouge">tags &lt;name of tag&gt;</code> at the end of <code class="language-plaintext highlighter-rouge">create note</code> command like this one:</p><div class="language-applescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">tell</span><span class="w"> </span><span class="nb">application</span><span class="w"> </span><span class="s2">"Evernote"</span><span class="w">
    </span><span class="nb">activate</span><span class="w">
    </span><span class="nv">create</span><span class="w"> </span><span class="nv">note</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="nv">file</span><span class="w"> </span><span class="nv">theFile</span><span class="w"> </span><span class="nv">notebook</span><span class="w"> </span><span class="s2">"Billings"</span><span class="w"> </span><span class="nv">tags</span><span class="w"> </span><span class="s2">"Phone"</span><span class="w">
</span><span class="k">end</span><span class="w"> </span><span class="k">tell</span><span class="w">
</span></code></pre></div></div><p><strong>The most important thing is the notebook name which you must replace with your notebook name</strong>. Remember why I told you each service needs their own rules? Sometimes you want to save the attachment in a different notebook — billings, receipts, or shared notebook. You can get this setup by creating a new rule that detects only the files you want to move to a different destination.</p><p>Now, try to copy some attachments into Evernote folder. Preview and run the rules to see if they’re imported successfully into Evernote. If you can see them in Evernote, the setup is complete.</p><p>By now every step should be ready. You should forward some emails with attachments to your IFTTT Gmail account and see if you can find the attachments in Evernote. Trigger the IFTTT recipe manually if you don’t see the files in your Dropbox.</p><p>If you find this guide useful, please share it with your friends. <a href="http://sayzlim.net/contact/" title="Contact - Sayz Lim">Send me an email</a> if you have any questions about this setup.</p></article></section><aside class="related-posts"><h5>Related Posts</h5><div class="related-box"><div class="related-card"><div class="related-date">Mar 16, 2021</div><a href="/evernote-device-limit-workaround/"><div class="related-title">Evernote Device Limit Workaround</div><div class="related-desc">Find out how you can turn the Evernote website into an application to work around the device limit.</div></a><ul class="excerpt-tags"><li><a href="/tag/evernote">Evernote</a><li><a href="/tag/tutorial">Tutorial</a></ul></div><div class="related-card"><div class="related-date">Dec 23, 2014</div><a href="/evernote-workflows/"><div class="related-title">Evernote Workflows</div><div class="related-desc">Evernote is essential in my workflow, and with workflows I can customize how I want the note created easily from Safari and iBooks.</div></a><ul class="excerpt-tags"><li><a href="/tag/evernote">Evernote</a><li><a href="/tag/workflow">Workflow</a></ul></div><div class="related-card"><div class="related-date">Dec 12, 2014</div><a href="/evernote-histories/"><div class="related-title">Inside Evernote Histories Notebook</div><div class="related-desc">Keeping a Histories Notebook that records your online activities proves to be a great asset in my workflow.</div></a><ul class="excerpt-tags"><li><a href="/tag/evernote">Evernote</a></ul></div><div class="related-card"><div class="related-date">Nov 01, 2014</div><a href="/evernote-search-alfred-workflow/"><div class="related-title">Evernote Search Alfred Workflow</div><div class="related-desc">Evernote Search is a simple Alfred workflow that searches for Evernote’s notes quickly by using Spotlight indexes.</div></a><ul class="excerpt-tags"><li><a href="/tag/evernote">Evernote</a><li><a href="/tag/alfred">Alfred</a></ul></div></div></aside></main><aside class="sidebar"><div class="sticky-box"> <form class="form" action="https://app.convertkit.com/forms/2056450/subscriptions" method="post" data-sv-form="2056450" data-uid="c249fe0755" data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;: &quot;redirect&quot;,&quot;redirect_url&quot;: &quot;https://sayzlim.net/welcome/&quot;}}}"> <label for="name">First Name</label> <input type="text" value="" name="fields[first_name]" placeholder="First Name" id="name" required> <label for="email">Email</label> <input type="email" value="" name="email_address" placeholder="Email Address" id="email" required> <button class="subscribe">Subscribe</button> </form><div class="sidebar-promo form"><p>Download CleanMyMac X, CleanShot X, and ClearVPN and other 30++ macOS applications for only $9.99/month.<br><a href="/is-setapp-worth-it/">Read More</a></p></div></div></aside><footer class="footer"> &copy; 2010–2022 Sayz Lim | Powered by <a href="https://jekyllrb.com" title="Jekyll">Jekyll</a> and <a href="https://pages.github.com" title="GitHub Pages">GitHub Pages</a></footer></div>
