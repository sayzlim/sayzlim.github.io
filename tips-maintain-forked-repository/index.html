<!DOCTYPE html><html lang='en'><head prefix="og: http://ogp.me/ns/article#"><meta charset='utf-8'><title>Tips to Maintain a Forked Repository | Sayz Lim</title><meta name="description" content="I'm sharing some tips to help you maintain repositories from the projects you forked from GitHub."><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="/main.css?v=1710434520" as="style"><link rel="stylesheet" href="/main.css?v=1710434520" > <script src="/main.js?v=1710434520"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Viga&family=Karla:wght@300;400;500;600&display=swap" rel="stylesheet"><link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96"><link rel="apple-touch-icon" sizes="56x56" href="/img/apple-touch-icon-56x56.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><meta name="twitter:dnt" content="on"><meta name="format-detection" content="telephone=no"><link rel="alternate" type="application/rss+xml" title="Sayz Lim" href="https://sayzlim.net/atom.xml" /><meta property="og:title" content="Tips to Maintain a Forked Repository" /><meta property="og:type" content="article" /><meta property="og:url" content="https://sayzlim.net/tips-maintain-forked-repository/" /><meta property="og:description" content="I'm sharing some tips to help you maintain repositories from the projects you forked from GitHub." /><meta property="article:published_time" content="2021-09-13" /><meta property="article:author" content="Sayz Lim" /><meta property="og:image" content="" /><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@sayzlim"><meta name="twitter:title" content="Tips to Maintain a Forked Repository"><meta name="twitter:description" content="I'm sharing some tips to help you maintain repositories from the projects you forked from GitHub."><meta name="twitter:image:src" content=""><link rel="pingback" href="https://webmention.io/sayzlim.net/xmlrpc" /><link rel="webmention" href="https://webmention.io/sayzlim.net/webmention" /> <script async src="https://stats.sayzlim.net/script.js" data-website-id="35992e34-11d0-4168-8d6c-4a4c796417ef" ></script><body><div class="container"><header class="header"><nav class="nav-item"><ul><li><a href="/" >Home</a><li><a href="/posts/" >Posts</a><li><a href="/tags/" >Tags</a><li><a href="/tools/" >Tools</a><li></ul></nav><aside class="select-theme"> <button onclick="_manager.resetUserTheme()" aria-label="Enable System Theme"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> </button> <button onclick="_manager.setTheme('light')" aria-label="Enable Light Theme"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg> </svg> </button> <button onclick="_manager.setTheme('dark')" aria-label="Enable Dark Theme"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg> </button></aside></header><div class="layout:sidebar"><main class="posts flow"><section class="post flow" itemscope itemtype="https://schema.org/BlogPosting"><header class="flow"><h1 itemprop="headline"> <a itemprop="url" href="/tips-maintain-forked-repository/">Tips to Maintain a Forked Repository</a></h1><div class="post-author"><div class="post-avatar"><img src="/img/sayzlim.jpg" alt="Sayz Lim"><span class="schema-author" itemprop="author" itemprop="publisher">Sayz Lim</span></div><div class="post-date"> <span>Published</span> <time itemprop="datePublished" datetime="2021-09-13">Sep 13, 2021</time></div><div class="post-tag"> <span>Tagged</span><ul class="post-tags"><li><a href="/tag/git">Git</a></ul></div></div></header><article itemprop="articleBody" class="flow"><p>Working with <a href="https://www.carbonads.net" title="Carbon Ads">Carbon</a> means I have to fork some open-source projects to submit a pull request with the ad code integration. Here is the list of the tips I’ve collected while learning how to contribute to the public repositories.</p><p>By forking a repository, it means that you’ve cloned an identical project that you can edit. Whenever you make a mistake, the worst-case scenario is to delete the forked repository and clone it again.</p><p>The main purpose of these tips is to <strong>avoid resetting the repository</strong> and understand the workflow to contribute back to the upstream project.</p><p class="sidenote">I will be referring to the <code class="language-plaintext highlighter-rouge">master</code> branch as <code class="language-plaintext highlighter-rouge">main</code> in this post. They can be used interchangeably, but most new projects prefer to name their default branch as <code class="language-plaintext highlighter-rouge">main</code>.</p><h2 id="always-create-a-new-branch">Always Create a New Branch</h2><p>Branching is a safe way for you to experiment with a new feature without affecting the main branch. Even if you’re making a minor update to the <code class="language-plaintext highlighter-rouge">README</code>, you’re still going to create a new branch because it will keep the main branch clean.</p><p>Whenever you’re done with a feature, you can push the branch you’re working to your forked repository. Then, you can follow up by submitting a pull request to the upstream.</p><p class="sidenote">The <code class="language-plaintext highlighter-rouge">upstream</code> remote refers to <strong>the original source</strong> of your forked repository. You can check the configured remote repository by running <code class="language-plaintext highlighter-rouge">git remote -v</code> in Terminal. <a href="https://docs.github.com/en/github/collaborating-with-pull-requests/working-with-forks/configuring-a-remote-for-a-fork" title="Configuring a remote for a fork - GitHub Docs">Follow this guide by GitHub</a> to configure remote repository.</p><h2 id="never-commit-to-the-main-branch">Never Commit to the Main Branch</h2><p>You should never commit to the main branch. I mentioned before that we want to keep the main branch clean. What exactly do we want to keep it clean from?</p><p>We don’t want our local commits in the main branch.</p><p>The local main branch should always match to the upstream origin. Adding commits to the local main branch will create conflicts that trigger Git to asks you merge, rebase, or fast-forward the tree history.</p><p>Instead of committing to the main branch, you want the upstream maintainer to accept your pull request, and then you can match the HEAD of your main branch to the upstream main branch. Here’s the command you can run:</p><div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git switch main
git pull upstream main --ff
</span></code></pre></div></div><p>Let’s run through each line. <code class="language-plaintext highlighter-rouge">git switch main</code> lets you switch to the <code class="language-plaintext highlighter-rouge">main</code> branch where you can apply the update from the upstream. Once you’re on the <code class="language-plaintext highlighter-rouge">main</code> branch, you can pull the latest update and pass <code class="language-plaintext highlighter-rouge">--ff</code> option to fast forward the commits. It’s optional to pass <code class="language-plaintext highlighter-rouge">--ff</code> if you keep the main branch clean, however, it’s a good practice to always decide how you want to deal with the conflicts.</p><h2 id="dealing-with-conflicts-on-main-branch">Dealing with Conflicts on Main Branch</h2><p>I often messed up the main branch when I was learning using Git. The most common mistake is to run this command on the main branch.</p><div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git pull upstream main
</span></code></pre></div></div><p>Here is the problem with the command above.</p><p>You’re telling git to fetch and update the active branch to match the remote branch <strong>without specifying how you want to deal with the conflicts</strong>.</p><p>Then this happens:</p><ol><li>I panicked because I didn’t know how to deal with the conflicts.<li>I gave up, deleted the folder, and recloned the remote repository.</ol><p>There is no need to panic because you’re still working on your local and remote branch.<sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup> The worst-case scenario is to delete and refork the repository if you’re still unfamiliar with Git.</p><p>However, you can easily fix this issue by running this command:</p><div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git reflog
git reset HEAD@{index}
</span></code></pre></div></div><p>Let’s break down the command above.</p><ul><li><code class="language-plaintext highlighter-rouge">reflog</code> shows the history of updates that happened to the tip of branches in the local repository.<li><code class="language-plaintext highlighter-rouge">git reset HEAD@{index}</code> reset the branch to the number of moves based on the passed <code class="language-plaintext highlighter-rouge">index</code> value. <code class="language-plaintext highlighter-rouge">HEAD@{index}</code> is one of many ways to specify revision value. I personally prefer to use the <code class="language-plaintext highlighter-rouge">sha1</code> value.</ul><h2 id="syncing-local-main-branch-to-upstream">Syncing Local Main Branch to Upstream</h2><p>You can deal with most conflicts locally before submitting a pull request. The reason is the upstream main branch might have received more commits since the last time you cloned it. Match the tip of your local main branch to the upstream main branch. Here’s what you can run:</p><div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git fetch upstream main
git switch main &amp;&amp; rebase upstream/main
git push origin main
</span></code></pre></div></div><h2 id="pushing-force-to-remote-branch">Pushing –Force to Remote Branch</h2><p>Sometimes I want to set things right for both local and remote repository. I don’t plan to keep any updates I’ve made and my main goal is to sync local and remote repository to restart everything.</p><p class="sidenote"><strong>You can only do this if you’re the only one who manage repository</strong>. For example, I can do it for my Jekyll site because the repository is private and no one else will be affected if I forcibly push an update to the remote repository.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reflog
git reset --hard &lt;sha1-value&gt;
git branch -r
git fetch upstream main &amp;&amp; git rebase upstream/main
git push --force origin main
</code></pre></div></div><ol><li>Check for the <code class="language-plaintext highlighter-rouge">sha1</code> value we’re going to pass into the <code class="language-plaintext highlighter-rouge">git reset</code> command.<li>Reset the branch before it’s broken.<li>List all remote repositories with their branches. Most of the time, you’re looking at the <code class="language-plaintext highlighter-rouge">upstream/main</code> branch.<li>Fetch the <code class="language-plaintext highlighter-rouge">main</code> branch from <code class="language-plaintext highlighter-rouge">upstream</code> and rebase local <code class="language-plaintext highlighter-rouge">main</code> branch to the upstream <code class="language-plaintext highlighter-rouge">main</code> branch.<li>Push local <code class="language-plaintext highlighter-rouge">main</code> branch to <code class="language-plaintext highlighter-rouge">origin/main</code> remote branch.</ol><p>This step will ensure you have a clean slate of a local and remote main branch without deleting the forked repository. Next, create and start your work from the new branch.</p><div class="footnotes" role="doc-endnotes"><ol><li id="fn:1" role="doc-endnote"><p>Unless you’re working in a company that allows you to push your commit to the remote main branch. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p></ol></div></article></section><aside class="related-posts"><h5>Related Posts</h5><div class="related-box"><div class="related-card"><div class="related-date">Jul 10, 2021</div><a href="/verify-osxkeychain-helper/"><div class="related-title">How to Verify 'osxkeychain helper' Personal Access Token</div><div class="related-desc">If you use GitHub for macOS, you want to verify that your personal token access is stored correctly.</div></a><ul class="excerpt-tags"><li><a href="/tag/git">Git</a><li><a href="/tag/tutorial">Tutorial</a></ul></div></div></aside></main><aside class="sidebar"><div class="sticky-box"><div class="sidebar-promo form"><p><strong>Support my first digital product!</strong><br> A bundle of Keyboard Maestro macros to supercharge your workspace and get things done faster.<br><a href="/lab/tyro/">Get Tyro</a></p></div><div class="carbon-box"> <script async src="//cdn.carbonads.com/carbon.js?serve=CKYIC2JI&placement=sayzlimnet&format=cover" id="_carbonads_js"></script></div></div></aside></div><aside class="hello flow"><p> 👋 <strong>Thanks for visiting this site!</strong> Would you mind if I tell you more about what I create?</p><button onclick="toggleElement('.overlay');dismissElement('.hello')";>Sure</button> <button onclick="dismissElement('.hello')">Maybe next time</button></aside><aside class="overlay"><section class="flow"> <button id="close" onclick="dismissElement('.overlay')"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><p> I want to show you that you don't have to be a programmer to build useful <em>programs</em> that can solve your day-to-day problems. You can delegate your jobs to your computer. You can rest while your computer works.</p><p>Enter your email address below to receive Keyboard Maestro tips every week.</p><form class="form" action="https://app.convertkit.com/forms/2056450/subscriptions" method="post" data-sv-form="2056450" data-uid="c249fe0755" data-options='{"settings":{"after_subscribe":{"action": "redirect","redirect_url": "https://sayzlim.net/welcome/"}}}' > <label for="name">First Name</label> <input type="text" value="" name="fields[first_name]" placeholder="First Name" id="name" required /> <label for="email">Email</label> <input type="email" value="" name="email_address" placeholder="Email Address" id="email" required /> <button class="subscribe">Subscribe</button> </form></section></aside><footer class="footer"> &copy; 2010–2024 Sayz Lim | Powered by <a href="https://jekyllrb.com" title="Jekyll">Jekyll</a> and <a href="https://pages.github.com" title="GitHub Pages">GitHub Pages</a></footer></div>
