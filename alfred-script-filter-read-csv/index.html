<!DOCTYPE html><html lang='en'><head prefix="og: http://ogp.me/ns/article#"><meta charset='utf-8'><title>Reading CSV as JSON with Alfred Script Filter | Sayz Lim</title><meta name="description" content="Learn how to use CSV as the source data in Alfred through Script Filter input."><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="preload" href="/main.css?v=1710434520" as="style"><link rel="stylesheet" href="/main.css?v=1710434520" > <script src="/main.js?v=1710434520"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Viga&family=Karla:wght@300;400;500;600&display=swap" rel="stylesheet"><link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96"><link rel="apple-touch-icon" sizes="56x56" href="/img/apple-touch-icon-56x56.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/apple-touch-icon-152x152.png"><meta name="twitter:dnt" content="on"><meta name="format-detection" content="telephone=no"><link rel="alternate" type="application/rss+xml" title="Sayz Lim" href="https://sayzlim.net/atom.xml" /><meta property="og:title" content="Reading CSV as JSON with Alfred Script Filter" /><meta property="og:type" content="article" /><meta property="og:url" content="https://sayzlim.net/alfred-script-filter-read-csv/" /><meta property="og:description" content="Learn how to use CSV as the source data in Alfred through Script Filter input." /><meta property="article:published_time" content="2022-08-10" /><meta property="article:author" content="Sayz Lim" /><meta property="og:image" content="https://images.sayzlim.net/2022/08/alfred-script-filter-workflow.webp" /><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@sayzlim"><meta name="twitter:title" content="Reading CSV as JSON with Alfred Script Filter"><meta name="twitter:description" content="Learn how to use CSV as the source data in Alfred through Script Filter input."><meta name="twitter:image:src" content="https://images.sayzlim.net/2022/08/alfred-script-filter-workflow.webp"><link rel="pingback" href="https://webmention.io/sayzlim.net/xmlrpc" /><link rel="webmention" href="https://webmention.io/sayzlim.net/webmention" /> <script async src="https://stats.sayzlim.net/script.js" data-website-id="35992e34-11d0-4168-8d6c-4a4c796417ef" ></script><body><div class="container"><header class="header"><nav class="nav-item"><ul><li><a href="/" >Home</a><li><a href="/posts/" >Posts</a><li><a href="/tags/" >Tags</a><li><a href="/tools/" >Tools</a><li></ul></nav><aside class="select-theme"> <button onclick="_manager.resetUserTheme()" aria-label="Enable System Theme"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> </button> <button onclick="_manager.setTheme('light')" aria-label="Enable Light Theme"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg> </svg> </button> <button onclick="_manager.setTheme('dark')" aria-label="Enable Dark Theme"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg> </button></aside></header><div class="layout:sidebar"><main class="posts flow"><section class="post flow" itemscope itemtype="https://schema.org/BlogPosting"><header class="flow"><h1 itemprop="headline"> <a itemprop="url" href="/alfred-script-filter-read-csv/">Reading CSV as JSON with Alfred Script Filter</a></h1><div class="post-author"><div class="post-avatar"><img src="/img/sayzlim.jpg" alt="Sayz Lim"><span class="schema-author" itemprop="author" itemprop="publisher">Sayz Lim</span></div><div class="post-date"> <span>Published</span> <time itemprop="datePublished" datetime="2022-08-10">Aug 10, 2022</time></div><div class="post-tag"> <span>Tagged</span><ul class="post-tags"><li><a href="/tag/alfred">Alfred</a></ul></div></div></header><article itemprop="articleBody" class="flow"><p>I write this guide for people who want to learn how to set up Alfred with Script Filter as the input. It’s perfectly fine if you’re not familiar with any scripting languages. The guide will show you how to convert CSV files into JSON objects that can populate Alfred search results.</p><h2 id="pick-a-scripting-language">Pick a Scripting Language</h2><p>You can write the script in any language you’re comfortable with and run it through a Unix shell. For this tutorial, we’re going to use Python 3. The easiest way to install Python is through a package manager like Homebrew. You can <a href="https://docs.python-guide.org/starting/install3/osx/">refer to this guide to install Python on macOS</a>.</p><h2 id="workflow-setup">Workflow Setup</h2><p>Create a blank workflow and add Script Filter input with keywords to trigger the workflow. Write this down in the script input field.</p><div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 main.py
</code></pre></div></div><p><img src="https://images.sayzlim.net/2022/08/alfred-script-filter-reveal-workflow.webp" alt="" title="Reveal Alfred Workflow Folder" /></p><p>Click on the folder icon as seen from the screenshot above to reveal the workflow directory. Create a new Python file in the workflow folder and name it <code class="language-plaintext highlighter-rouge">main.py</code>. The main process will be written in this script.</p><p>There are two things we want to achieve in this script:</p><ol><li>The workflow must be able to read the file with a relative path using tilde so any user can use it.<li>The workflow must be able to convert the CSV into JSON for Alfred to filter the results.</ol><p>Here is the <code class="language-plaintext highlighter-rouge">sample.csv</code> content that we’ll be using for this tutorial. You can store it on the desktop.</p><p><a href="https://s3.sayzlim.net/f/sample.csv">Download CSV</a></p><h2 id="python-script">Python Script</h2><p>Here is a Python script to read a CSV file from your selected source on your machine. I’m going to break down each part of the code, so they make sense, and you can modify it to match your workflow.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="n">csv_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">"~/Desktop/sample.csv"</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">"items"</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
	<span class="n">csv_reader</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csv_reader</span><span class="p">:</span>
		<span class="n">row_item</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">"uid"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span>
			<span class="s">"title"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"title"</span><span class="p">],</span>
			<span class="s">"subtitle"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"subtitle"</span><span class="p">],</span>
			<span class="s">"match"</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"title"</span><span class="p">]</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s">"platform"</span><span class="p">],</span>
			<span class="s">"arg"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"title"</span><span class="p">],</span>
			<span class="s">"text"</span><span class="p">:</span> <span class="p">{</span>
					<span class="s">"copy"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"price"</span><span class="p">]</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="n">result</span><span class="p">[</span><span class="s">"items"</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">row_item</span><span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div></div><p>First, we must import the modules we need to process the JSON and CSV files. These modules allow us to run the functions, read CSV files and convert them into JSON. We also want to expand the tilde using the <code class="language-plaintext highlighter-rouge">os.path.expanduser</code> function so this script can work for all users.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">csv</span>

<span class="n">csv_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">"~/Desktop/sample.csv"</span><span class="p">)</span>
</code></pre></div></div><p>Alfred accepts JSON as the output of the script. The result must be stored inside the <code class="language-plaintext highlighter-rouge">items</code> key for Alfred to show them when you search for it. The following script declares a <code class="language-plaintext highlighter-rouge">result</code> dictionary variable with <code class="language-plaintext highlighter-rouge">items</code> as an array.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">"items"</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</code></pre></div></div><p>Now we want to populate the <code class="language-plaintext highlighter-rouge">items</code> key with the row item from the <code class="language-plaintext highlighter-rouge">csv_file_path</code>. The most important part is the value you assign for each key in the <code class="language-plaintext highlighter-rouge">row_item</code>. You can learn more about <a href="https://www.alfredapp.com/help/workflows/inputs/script-filter/json/">Script Filter JSON Format</a>.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">csv_file</span><span class="p">:</span>
	<span class="n">csv_reader</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csv_reader</span><span class="p">:</span>
		<span class="n">row_item</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">"uid"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">'title'</span><span class="p">],</span>
			<span class="s">"title"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"title"</span><span class="p">],</span>
			<span class="s">"subtitle"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"subtitle"</span><span class="p">],</span>
			<span class="s">"match"</span> <span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"title"</span><span class="p">]</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s">"platform"</span><span class="p">],</span>
			<span class="s">"arg"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"title"</span><span class="p">],</span>
			<span class="s">"text"</span><span class="p">:</span> <span class="p">{</span>
					<span class="s">"copy"</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s">"price"</span><span class="p">]</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="n">result</span><span class="p">[</span><span class="s">"items"</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">row_item</span><span class="p">)</span>
</code></pre></div></div><p>The advantage of using Script Filter is that we can tell Alfred which value to use for the workflow. Here are some things that you want to consider modifying:</p><ul><li>Define the value that you want to pass in <code class="language-plaintext highlighter-rouge">arg</code>.<li>Pass multiple values into the <code class="language-plaintext highlighter-rouge">match</code> key to expand what Alfred can search. In the following example, we combine row title and platform values.<li>Define the text result you receive from copying <code class="language-plaintext highlighter-rouge">Command-C</code> and displaying large type with <code class="language-plaintext highlighter-rouge">Command-L</code> in the <code class="language-plaintext highlighter-rouge">text</code> key.</ul><p>Once the items are populated, you can convert them into JSON using <code class="language-plaintext highlighter-rouge">json.dumps(result)</code> and print the result for Alfred to pick up.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</code></pre></div></div><h2 id="example-use-case">Example Use Case</h2><p><img src="https://images.sayzlim.net/2022/08/alfred-script-filter-workflow.webp" alt="" title="Alfred Script Filter Result" /></p><p>Once you have the Script Filter input configured, you can chain them with actions based on the argument you’ve defined. For example, I have a CSV file containing the list of sites in the ad network. I can pass the site ID as the argument and open the dashboard URL to check the site performance.</p><p>If you use CRM like HubSpot, you can also export the list of customers you manage and store them on your machine. Instead of using HubSpot search, you can filter the result right from Alfred. You can be creative with the modifiers:</p><ul><li>Create an action to accept customer ID to take you to the HubSpot contact page.<li>Set the <code class="language-plaintext highlighter-rouge">text</code> key to the contact email address so you can copy it from the search result.<li>Display the company name as the subtitle of the search result.</ul><p>The advantage of Script Filter input is the flexibility to modify the value of the search result. It’s possible to build a fancier workflow with API, however, I see that processing CSV as the most practical use case for most people.</p></article></section><aside class="related-posts"><h5>Related Posts</h5><div class="related-box"><div class="related-card"><div class="related-date">Jun 04, 2022</div><a href="/better-quit-all/"><div class="related-title">Better "Quit All" with Keyboard Maestro</div><div class="related-desc">Combine Alfred and Keyboard Maestro to create a shortcut that quits all applications and choose which apps to keep active in the Dock.</div></a><ul class="excerpt-tags"><li><a href="/tag/alfred">Alfred</a><li><a href="/tag/keyboard-maestro">Keyboard Maestro</a></ul></div><div class="related-card"><div class="related-date">Nov 19, 2014</div><a href="/non-conflicting-shortcuts/"><div class="related-title">Non-Conflicting Shortcuts</div><div class="related-desc">How often you have to reassign a global shortcut because it interferes with the built-in shortcuts? How to install more macros and workflows without adding complexity to your setup?</div></a><ul class="excerpt-tags"><li><a href="/tag/keyboard-maestro">Keyboard Maestro</a><li><a href="/tag/alfred">Alfred</a><li><a href="/tag/bettertouchtool">BetterTouchTool</a></ul></div><div class="related-card"><div class="related-date">Sep 24, 2014</div><a href="/keyboard-maestro-alfred/"><div class="related-title">Trigger Keyboard Maestro Macros with Alfred</div><div class="related-desc">Key Clue is an workflow that lets you run menu bar item and Keyboard Maestro macros from Alfred for Mac.</div></a><ul class="excerpt-tags"><li><a href="/tag/alfred">Alfred</a><li><a href="/tag/keyboard-maestro">Keyboard Maestro</a></ul></div><div class="related-card"><div class="related-date">Aug 29, 2014</div><a href="/terminology-mac/"><div class="related-title">Terminology for Mac</div><div class="related-desc">Bring Terminology — a dictionary, a thesaurus, and a reference tool — to your Mac with the combination of Fluid and Alfred.</div></a><ul class="excerpt-tags"><li><a href="/tag/writing">Writing</a><li><a href="/tag/terminology">Terminology</a><li><a href="/tag/fluid">Fluid</a><li><a href="/tag/alfred">Alfred</a></ul></div></div></aside></main><aside class="sidebar"><div class="sticky-box"><div class="sidebar-promo form"><p><strong>Support my first digital product!</strong><br> A bundle of Keyboard Maestro macros to supercharge your workspace and get things done faster.<br><a href="/lab/tyro/">Get Tyro</a></p></div><div class="carbon-box"> <script async src="//cdn.carbonads.com/carbon.js?serve=CKYIC2JI&placement=sayzlimnet&format=cover" id="_carbonads_js"></script></div></div></aside></div><aside class="hello flow"><p> 👋 <strong>Thanks for visiting this site!</strong> Would you mind if I tell you more about what I create?</p><button onclick="toggleElement('.overlay');dismissElement('.hello')";>Sure</button> <button onclick="dismissElement('.hello')">Maybe next time</button></aside><aside class="overlay"><section class="flow"> <button id="close" onclick="dismissElement('.overlay')"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button><p> I want to show you that you don't have to be a programmer to build useful <em>programs</em> that can solve your day-to-day problems. You can delegate your jobs to your computer. You can rest while your computer works.</p><p>Enter your email address below to receive Keyboard Maestro tips every week.</p><form class="form" action="https://app.convertkit.com/forms/2056450/subscriptions" method="post" data-sv-form="2056450" data-uid="c249fe0755" data-options='{"settings":{"after_subscribe":{"action": "redirect","redirect_url": "https://sayzlim.net/welcome/"}}}' > <label for="name">First Name</label> <input type="text" value="" name="fields[first_name]" placeholder="First Name" id="name" required /> <label for="email">Email</label> <input type="email" value="" name="email_address" placeholder="Email Address" id="email" required /> <button class="subscribe">Subscribe</button> </form></section></aside><footer class="footer"> &copy; 2010–2024 Sayz Lim | Powered by <a href="https://jekyllrb.com" title="Jekyll">Jekyll</a> and <a href="https://pages.github.com" title="GitHub Pages">GitHub Pages</a></footer></div>
